import type { NodeSourceLocation } from '#/runescript-parser/ast/NodeSourceLocation.js';
import { Opcode } from '#/runescript-compiler/codegen/Opcode.js';

/**
 * Represents a single code instruction generated by the code generator.
 */
export class Instruction<T> {
    constructor(
        public readonly opcode: Opcode<T>,
        public readonly operand: T,
        public readonly source?: NodeSourceLocation
    ) {}

    public deconstruct(): [Opcode<T>, T] {
        return [this.opcode, this.operand];
    }

    public toString(): string {
        return `Instruction(opcode=${this.opcode}, operand=${this.operand})`;
    }
}
